<style>
.magazineorder-all{
	margin-left:50px;
}
.am-g{
	border-bottom: 1px solid #5a5252;
}
.border-right{
	border-right: 1px solid #5a5252;
}
.form-title{
	color:black;
}
.border-left{
	border-left: 1px solid #5a5252;
}
.border-top{
	border-top: 1px solid #5a5252;
}
</style>
<div class="row-content am-cf">
	<div class="row">
		<div class="am-u-sm-12 am-u-md-12 am-u-lg-12">
			<div class="widget am-cf">
				<div class="widget-head am-cf">
					<div class="widget-title am-fl">投稿信息</div>
					<div class="widget-function am-fr">
						<a href="javascript:;" class="am-icon-cog"></a>
					</div>
				</div>
				<div class="widget-body am-fr">
					<div class="magazineorder-all">
						<div class="am-g am-g-fixed border-top border-left">
						  <div class="am-u-sm-3 border-right form-title">作品名稱</div>
						  <div class="am-u-sm-9 border-right" th:text="${record.name =='' || record.name == null  ? '&nbsp;' : record.name}"></div>
						</div>
						<div class="am-g am-g-fixed border-left">
						  <div class="am-u-sm-3 border-right form-title">作品類型</div>
						  <div class="am-u-sm-3 border-right">
							  	<span th:if="${record.type == 0}">書法</span>
								<span th:if="${record.type == 1}">繪畫</span>
								<span th:if="${record.type == 2}">攝影</span>
								<span th:if="${record.type == 3}">多媒體</span>
								<span th:if="${record.type == 4}">作文</span>
								<span th:if="${record.type == 5}">其他</span>
								<span th:if="${record.type == null}"> </span>
						  </div>
						  <div class="am-u-sm-3 border-right form-title">投稿時間</div>
						  <div class="am-u-sm-3 border-right" th:text="${record.createTime =='' || record.createTime == null  ? '&nbsp;' : #dates.format(record.createTime, 'yyyy-MM-dd HH:mm:ss')}"></div>
						</div>
						<div class="am-g am-g-fixed border-left">
						  <div class="am-u-sm-3 border-right form-title">學生姓名</div>
						  <div class="am-u-sm-3 border-right" th:text="${record.studentName =='' || record.studentName == null  ? '&nbsp;' : record.studentName}"></div>
						  <div class="am-u-sm-3 border-right form-title">學校</div>
						  <div class="am-u-sm-3 border-right" th:text="${record.schoolName =='' || record.schoolName == null  ? '&nbsp;' : record.schoolName}"></div>
						</div>
						<div class="am-g am-g-fixed border-left">
						  <div class="am-u-sm-3 border-right form-title">年班</div>
						  <div class="am-u-sm-3 border-right" th:text="${record.className =='' || record.className == null  ? '&nbsp;' : record.className}"></div>
						  <div class="am-u-sm-3 border-right form-title">Email</div>
						  <div class="am-u-sm-3 border-right" th:text="${record.email =='' || record.email == null  ? '&nbsp;' : record.email}"></div>
						</div>
						<div class="am-g am-g-fixed border-left">
						  <div class="am-u-sm-3 border-right form-title">聯絡電話</div>
						  <div class="am-u-sm-3 border-right" th:text="${record.phone =='' || record.phone == null  ? '&nbsp;' : record.phone}"></div>
						  <div class="am-u-sm-3 border-right form-title">Whatsapp</div>
						  <div class="am-u-sm-3 border-right" th:text="${record.whatsapp =='' || record.whatsapp == null  ? '&nbsp;' : record.whatsapp}"></div>
						</div>
						<div class="am-g am-g-fixed border-left">
						  <div class="am-u-sm-3 border-right form-title">指導老師</div>
						  <div class="am-u-sm-9 border-right" th:text="${record.teacher  =='' || record.teacher == null  ? '&nbsp;' : record.teacher}"></div>
						</div>
						<div class="am-g am-g-fixed border-left" style="height: 150px;">
						  <div class="am-u-sm-3 border-right form-title"  style="height: 150px;">作品說明</div>
						  <div class="am-u-sm-9 border-right" style="height: 150px;" th:text="${record.explain  =='' || record.explain == null  ? '&nbsp;' : record.explain}"></div>
						</div>
						<div class="am-g am-g-fixed border-left">
						  <div class="am-u-sm-3 border-right form-title">附件/視頻鏈接</div>
						  <div class="am-u-sm-9 border-right">
						  		<a th:each="urls,usrlsStat: ${#strings.listSplit(record.enclosureUrl,',')}" th:href="@{${urls}}" target="view_window" th:text="查看鏈接+${usrlsStat.index+1}" style="padding-right:15px;" ></a>
						  </div>
						</div>
						<div class="am-g am-g-fixed border-left">
						  <div class="am-u-sm-3 border-right form-title">審核人</div>
						  <div class="am-u-sm-9 border-right" th:text="${record.reviewer =='' || record.reviewer == null  ? '&nbsp;' : record.reviewer}"></div>
						</div>
						<div class="am-g am-g-fixed border-left">
						  <div class="am-u-sm-3 border-right form-title">審核時間</div>
						  <div class="am-u-sm-9 border-right" th:text="${record.reviewTime =='' || record.reviewTime == null  ? '&nbsp;' : #dates.format(record.reviewTime, 'yyyy-MM-dd HH:mm:ss')}"></div>
						</div>
					</div>
					
					<hr/>
					<div class="am-form-group">
						<div class="am-u-sm-10 am-u-sm-push-2">
							<button type="button" th:if="${record.status == 0}" shiro:hasPermission="draftuser:review" th:onclick="'javascript:review('+${record.id}+',1);'"
								class="am-btn am-btn-primary tpl-btn-bg-color-success ">通過</button>
							<button type="button" th:if="${record.status == 0}" shiro:hasPermission="draftuser:review" th:onclick="'javascript:review('+${record.id}+',2);'"
								class="am-btn am-btn-warning tpl-btn-bg-color-warning ">不通過</button>
							<button type="button" onclick="loadPage('draftuser/listUI')"
								class="am-btn am-btn-success tpl-btn-bg-color-success ">返回</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script  th:inline="javascript">
		function review(id,status){
			var context;
			if (status == 1) {
				context = '确认確認通過該投稿吗？'
			}else{
				context = '确认確認不通過該投稿吗？'
			}
			
			layer.confirm(context, {
		        icon : 3,
		        title : '提示'
		    }, function(index, layero) {
		        $.ajax({
		            type : "GET",
		            url :  "draftuser/review/"+id+"/"+status,
		            dataType : "json",
		            success : function(resultdata) {
		                if (resultdata.code=="0") {
		                    layer.msg(resultdata.msg, {
		                        icon : 1
		                    });
		                    loadPage('draftuser/listUI');
		                } else {
		                    layer.msg(resultdata.msg, {
		                        icon : 0
		                    });
		                }
		            },
		            error : function(errorMsg) {
		                layer.msg('服務器未響應，請稍後重試！', {
		                    icon : 3
		                });
		            }
		        });
		        layer.close(index);
		    });
		}
	</script>
	</div>
